# Meeting Translator - å®æ—¶ä¼šè®®ç¿»è¯‘ç³»ç»Ÿ

[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)

**[ä¸­æ–‡](#ä¸­æ–‡) | [English](#english)**

---

<a name="ä¸­æ–‡"></a>

## ä¸­æ–‡

**ä»"èŒ¶å£¶é‡Œè£…æ±¤åœ†"åˆ°æµç•…å¯¹è¯ï¼šæ‰“é€ é›¶å»¶è¿Ÿå®æ—¶ä¼šè®®ç¿»è¯‘ç³»ç»Ÿ**

ä¸€ä¸ªçœŸæ­£é›¶å»¶è¿Ÿã€åŒå‘å®æ—¶ã€å®Œå…¨æœ¬åœ°åŒ–ã€ä¸ä¼šè®®è½¯ä»¶æ— å…³çš„ç¿»è¯‘ç³»ç»Ÿã€‚

### æ ¸å¿ƒäº®ç‚¹

- ğŸ¯ **å®Œå…¨æœ¬åœ°è¿è¡Œ**ï¼šåªåœ¨ä½ çš„ç”µè„‘ä¸Šï¼Œå…¶ä»–å‚ä¼šè€…æ— æ„ŸçŸ¥ï¼Œä¸éœ€è¦ä»»ä½•é…åˆ
- ğŸŒ **ä¼šè®®è½¯ä»¶æ— å…³**ï¼šæ”¯æŒ Zoomã€Teamsã€Google Meetã€è…¾è®¯ä¼šè®®ç­‰æ‰€æœ‰ä¼šè®®å¹³å°
- âš¡ **çœŸæ­£é›¶å»¶è¿Ÿ**ï¼š<500ms ç«¯åˆ°ç«¯å»¶è¿Ÿï¼Œä¸æ‰“æ–­å¯¹è¯èŠ‚å¥
- ğŸ”„ **å¤šæä¾›å•†æ”¯æŒ**ï¼šæ”¯æŒé˜¿é‡Œäº‘ã€OpenAI ç­‰å¤šä¸ªç¿»è¯‘æœåŠ¡ï¼Œå¯éšæ—¶åˆ‡æ¢
- ğŸ­ **è™šæ‹ŸåŒ–èº«æ¨¡å¼**ï¼šé€šè¿‡"Mike"è¿™æ ·çš„è™šæ‹Ÿè§’è‰²ï¼Œè®©èµ„æ·±ä¸“å®¶ç”¨ä¸­æ–‡è‡ªä¿¡è¡¨è¾¾
- ğŸŒ **å¤šè¯­è¨€ç•Œé¢**ï¼šæ”¯æŒä¸­æ–‡å’Œè‹±æ–‡ç•Œé¢ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ‡æ¢

### åŠŸèƒ½ç‰¹æ€§

#### åŒæ¨¡å¼å®æ—¶ç¿»è¯‘

**è¯´æ¨¡å¼ï¼ˆSpeak Modeï¼‰ï¼š**
- æ•è·ä½ çš„éº¦å…‹é£è¾“å…¥ï¼ˆä¸­æ–‡ï¼‰
- å®æ—¶ç¿»è¯‘æˆè‹±æ–‡
- å‘é€åˆ°è™šæ‹Ÿéº¦å…‹é£ â†’ ä¼šè®®ä¸­æ‰€æœ‰äººå¬åˆ°è‹±æ–‡
- **å»¶è¿Ÿ <500ms**

**å¬æ¨¡å¼ï¼ˆListen Modeï¼‰ï¼š**
- æ•è·ç³»ç»ŸéŸ³é¢‘ï¼ˆä¼šè®®ä¸­å…¶ä»–äººè¯´çš„è‹±è¯­ï¼‰
- å®æ—¶ç¿»è¯‘æˆä¸­æ–‡
- **å±å¹•ä¸Šæ˜¾ç¤ºä¸­æ–‡å­—å¹•**ï¼ˆè€ƒè™‘åˆ°ä¸­å›½ç”¨æˆ·ä¹ æƒ¯çœ‹å­—å¹•ï¼‰
- **å»¶è¿Ÿ <300ms**ï¼ˆæ— TTSç¯èŠ‚ï¼Œæ›´å¿«ï¼‰

**å¤šäººä¼šè®®æ”¯æŒï¼š**
- æ— è®ºä¼šè®®ä¸­æœ‰å¤šå°‘äººï¼Œç³»ç»Ÿéƒ½èƒ½æ­£å¸¸å·¥ä½œ
- æ‰€æœ‰å‚ä¼šè€…å®Œå…¨ä¸çŸ¥é“ä½ åœ¨ä½¿ç”¨ç¿»è¯‘

### æ¼”ç¤ºè§†é¢‘

ğŸ“º æŸ¥çœ‹å®Œæ•´æ¼”ç¤ºå’ŒæŠ€æœ¯ç»†èŠ‚ï¼š[Meeting Translator é¡¹ç›®åˆ†äº«](https://www.superlinear.academy/c/share-your-projects/f2e629)

### å¿«é€Ÿå¼€å§‹

#### å‰ç½®è¦æ±‚

1. **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS
2. **Python**: 3.9 - 3.11
3. **è™šæ‹ŸéŸ³é¢‘è®¾å¤‡**:
   - Windows: [Voicemeeter](https://voicemeeter.com/)
   - macOS: BlackHole
4. **ç¿»è¯‘æœåŠ¡ API Key** (é€‰æ‹©å…¶ä¸€):
   - **é˜¿é‡Œäº‘ DashScope** (é»˜è®¤): [ç”³è¯·åœ°å€](https://dashscope.console.aliyun.com/)
   - **OpenAI Realtime API**: [ç”³è¯·åœ°å€](https://platform.openai.com/api-keys)

#### å®‰è£…æ­¥éª¤

##### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/eerenyuan/meeting_translator.git
cd meeting_translator
```

##### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
python -m venv .venv

# Windows
.venv\Scripts\activate

# macOS
source .venv/bin/activate
```

##### 3. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

> **æ³¨æ„**: PyAudio åœ¨ Windows ä¸Šå¯èƒ½éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼š
> ```bash
> pip install pipwin
> pipwin install pyaudio
> ```

##### 4. å®‰è£…è™šæ‹ŸéŸ³é¢‘é©±åŠ¨

**Windowsç”¨æˆ·ï¼š**

ä¸‹è½½å¹¶å®‰è£… [Voicemeeter](https://voicemeeter.com/)ï¼ˆæ¨è Voicemeeter Banana æˆ– Potato ç‰ˆæœ¬ï¼‰ï¼Œå®‰è£…åé‡å¯ç”µè„‘ã€‚

**macOSç”¨æˆ·ï¼š**

```bash
brew install portaudio blackhole-2ch
```

##### 5. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®ç¿»è¯‘æœåŠ¡æä¾›å•†å’Œ API Key
```

**ä½¿ç”¨é˜¿é‡Œäº‘ï¼ˆé»˜è®¤ï¼‰ï¼š**
```bash
TRANSLATION_PROVIDER=aliyun
DASHSCOPE_API_KEY=your_dashscope_api_key_here
```

**ä½¿ç”¨ OpenAIï¼š**
```bash
TRANSLATION_PROVIDER=openai
OPENAI_API_KEY=your_openai_api_key_here
```

##### 6. é…ç½®ç•Œé¢è¯­è¨€ï¼ˆå¯é€‰ï¼‰

ç¼–è¾‘é…ç½®æ–‡ä»¶ `~/Documents/meeting_translator/config/config.json`ï¼š

```json
{
  "lang": "zh_CN"  // ä¸­æ–‡ç•Œé¢ï¼ˆé»˜è®¤ï¼‰
  // æˆ–
  "lang": "en_US"  // è‹±æ–‡ç•Œé¢
}
```

æ”¯æŒçš„è¯­è¨€ä»£ç ï¼š
- `zh_CN` æˆ– `zh` æˆ– `cn` - ä¸­æ–‡
- `en_US` æˆ– `en` - è‹±æ–‡

> **æ³¨æ„**: é¦–æ¬¡è¿è¡Œåä¼šè‡ªåŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºä¸­æ–‡ç•Œé¢ã€‚

##### 7. è¿è¡Œç¨‹åº

**Windows**:
```bash
# æ–¹æ³•1: ä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨èï¼‰
run.bat

# æ–¹æ³•2: æ‰‹åŠ¨è¿è¡Œ
cd meeting_translator && python main_app.py
```

**macOS**:
```bash
cd meeting_translator && python main_app.py
```

### ä½¿ç”¨ UVï¼ˆæ¨èç”¨äº Git Worktreesï¼‰

**UV** æ˜¯ç°ä»£ Python åŒ…ç®¡ç†å™¨ï¼Œæä¾›è‡ªåŠ¨ç¯å¢ƒç®¡ç†å’Œä¾èµ–å®‰è£…ï¼Œç‰¹åˆ«é€‚åˆä½¿ç”¨ git worktree çš„å¤šåˆ†æ”¯å¼€å‘åœºæ™¯ã€‚

#### ä¸ºä»€ä¹ˆä½¿ç”¨ UVï¼Ÿ

- âœ… **æ— éœ€æ‰‹åŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ** - è‡ªåŠ¨ç®¡ç† Python ç¯å¢ƒ
- âœ… **Git Worktree å‹å¥½** - å¤šä¸ªå·¥ä½œæ ‘å…±äº«ä¾èµ–ç¼“å­˜ï¼Œæ— éœ€é‡å¤å®‰è£…
- âœ… **ä¸€é”®è¿è¡Œ** - `uv run main.py` å³å¯å¯åŠ¨
- âœ… **è·¨å¹³å°æ”¯æŒ** - Windowsã€macOSã€Linux ç»Ÿä¸€ä½“éªŒ
- âœ… **æ›´å¿«çš„ä¾èµ–å®‰è£…** - å¹¶è¡Œå®‰è£…ï¼Œç¼“å­˜å‹å¥½

#### å®‰è£… UV

**macOS/Linux:**
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

**Windows (PowerShell):**
```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

**æˆ–ä½¿ç”¨ pip:**
```bash
pip install uv
```

#### ä½¿ç”¨ UV è¿è¡Œç¨‹åº

##### æ–¹æ³• 1: ä½¿ç”¨ uv runï¼ˆæ¨èï¼‰

```bash
# ä»ä»“åº“æ ¹ç›®å½•ç›´æ¥è¿è¡Œ
uv run main.py
```

é¦–æ¬¡è¿è¡Œæ—¶ï¼ŒUV ä¼šï¼š
1. è‡ªåŠ¨æ£€æµ‹ Python ç‰ˆæœ¬ï¼ˆæ ¹æ® `.python-version`ï¼‰
2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
3. å®‰è£…æ‰€æœ‰ä¾èµ–
4. å¯åŠ¨åº”ç”¨ç¨‹åº

åç»­è¿è¡Œä¼šé‡ç”¨å·²å®‰è£…çš„ç¯å¢ƒï¼Œç§’å¯åŠ¨ï¼

##### æ–¹æ³• 2: ä½¿ç”¨å¯åŠ¨è„šæœ¬

**macOS/Linux:**
```bash
./run.sh
```

**Windows:**
```bash
run.bat
```

å¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š
- âœ“ `.env` é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- âœ“ `uv` æ˜¯å¦å·²å®‰è£…
- âœ“ æä¾›å‹å¥½çš„é”™è¯¯æç¤º

### ä½¿ç”¨æŒ‡å—

#### åŸºæœ¬ä½¿ç”¨

1. **å¯åŠ¨ç¨‹åº**

   **Windows**:
   ```bash
   # æ–¹æ³•1: ä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨èï¼‰
   run.bat

   # æ–¹æ³•2: æ‰‹åŠ¨è¿è¡Œ
   cd meeting_translator && python main_app.py
   ```

   **macOS**:
   ```bash
   cd meeting_translator && python main_app.py
   ```

2. **é€‰æ‹©æ¨¡å¼**
   - æŒ‰ `F1` åˆ‡æ¢åˆ°"è¯´æ¨¡å¼"ï¼ˆä¸­è¯‘è‹±ï¼‰
   - æŒ‰ `F2` åˆ‡æ¢åˆ°"å¬æ¨¡å¼"ï¼ˆè‹±è¯‘ä¸­ï¼‰

3. **è®¾ç½®ä¼šè®®è½¯ä»¶**
   - åœ¨ä¼šè®®è½¯ä»¶ä¸­é€‰æ‹©**"Voicemeeter Input"**ï¼ˆæˆ– "VoiceMeeter Input"ï¼‰ä½œä¸ºéº¦å…‹é£
   - ç³»ç»ŸéŸ³é¢‘è¾“å‡ºè®¾ç½®ä¸º "Voicemeeter Input"

4. **å¼€å§‹ä¼šè®®**
   - è¯´æ¨¡å¼ï¼šç›´æ¥è¯´ä¸­æ–‡ï¼Œå¯¹æ–¹å¬åˆ°è‹±æ–‡
   - å¬æ¨¡å¼ï¼šçœ‹å±å¹•å­—å¹•ï¼Œå®æ—¶ç†è§£å¯¹æ–¹è¯´çš„è‹±æ–‡

#### é«˜çº§åŠŸèƒ½

##### åˆ‡æ¢ç¿»è¯‘æœåŠ¡æä¾›å•†

ç³»ç»Ÿæ”¯æŒå¤šä¸ªç¿»è¯‘æœåŠ¡æä¾›å•†ï¼Œå¯é€šè¿‡é…ç½®æ–‡ä»¶è½»æ¾åˆ‡æ¢ï¼š

| æä¾›å•† | ç‰¹ç‚¹ | é…ç½®æ–¹å¼ |
|--------|------|---------|
| **é˜¿é‡Œäº‘ DashScope** | é»˜è®¤ï¼Œé’ˆå¯¹ä¸­è‹±äº’è¯‘ä¼˜åŒ– | `TRANSLATION_PROVIDER=aliyun` |
| **OpenAI Realtime API** | GPT-realtime é©±åŠ¨ï¼Œæ”¯æŒå¤šè¯­è¨€ | `TRANSLATION_PROVIDER=openai` |

**åˆ‡æ¢æ­¥éª¤ï¼š**
1. ç¼–è¾‘ `.env` æ–‡ä»¶
2. ä¿®æ”¹ `TRANSLATION_PROVIDER` è®¾ç½®
3. é…ç½®å¯¹åº”çš„ API Key
4. é‡å¯ç¨‹åº

> æ³¨æ„ï¼šä¸åŒæä¾›å•†æ”¯æŒçš„è¯­éŸ³é€‰é¡¹ä¸åŒï¼Œåˆ‡æ¢åè¯·åœ¨ç•Œé¢ä¸­é€‰æ‹©åˆé€‚çš„è¯­éŸ³ã€‚

##### è‡ªå®šä¹‰æœ¯è¯­åº“

ç¼–è¾‘ `meeting_translator/glossary.json` æ·»åŠ ä¸“ä¸šæœ¯è¯­ï¼š

```json
{
  "description": "Translation glossary for meeting translator",
  "glossary": {
    "äº§å“A": "Product A",
    "ä¸šåŠ¡ç³»ç»Ÿ": "Business System",
    "ä½ çš„å…¬å¸å": "Your Company Name",
    "å¼ æ€»": "Mr. Zhang"
  }
}
```

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š[è¯æ±‡è¡¨ä½¿ç”¨æŒ‡å—](docs/GLOSSARY_GUIDE.md)

### æŠ€æœ¯æ¶æ„

#### æ ¸å¿ƒæŠ€æœ¯

- **è™šæ‹ŸéŸ³é¢‘åŠ«æŒ**ï¼šåœ¨æ“ä½œç³»ç»ŸéŸ³é¢‘å±‚é¢å·¥ä½œï¼Œä¸ä¼šè®®è½¯ä»¶è§£è€¦
- **æµå¼ç¿»è¯‘API**ï¼šç«¯åˆ°ç«¯å®æ—¶å¤„ç†ï¼Œå»¶è¿Ÿæä½
- **æœåŠ¡ç«¯VAD**ï¼šè‡ªåŠ¨æ£€æµ‹è¯­éŸ³æ´»åŠ¨ï¼Œä¼˜åŒ–æ–­å¥
- **å¤šæ¨¡æ€è¾“å‡º**ï¼šè¯´æ¨¡å¼è¾“å‡ºè¯­éŸ³ï¼Œå¬æ¨¡å¼è¾“å‡ºå­—å¹•

#### ç³»ç»Ÿè¦æ±‚

| ç»„ä»¶ | è¦æ±‚ |
|------|------|
| CPU | åŒæ ¸ä»¥ä¸Š |
| å†…å­˜ | 4GB+ |
| ç½‘ç»œ | ç¨³å®šç½‘ç»œè¿æ¥ |
| éŸ³é¢‘è®¾å¤‡ | éº¦å…‹é£ã€æ‰¬å£°å™¨ |

### å¸¸è§é—®é¢˜

#### 1. å¬ä¸åˆ°ç¿»è¯‘çš„è‹±æ–‡è¯­éŸ³ï¼Ÿ

**é—®é¢˜**: è¯´æ¨¡å¼ä¸‹ï¼Œå¯¹æ–¹å¬ä¸åˆ°æˆ‘çš„ç¿»è¯‘ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤ä¼šè®®è½¯ä»¶çš„éº¦å…‹é£è®¾ç½®ä¸º "Voicemeeter Input"
- æ£€æŸ¥ Voicemeeter æ˜¯å¦æ­£åœ¨è¿è¡Œ
- é‡å¯ç¨‹åºå’Œä¼šè®®è½¯ä»¶

#### 2. å­—å¹•ä¸æ˜¾ç¤ºï¼Ÿ

**é—®é¢˜**: å¬æ¨¡å¼ä¸‹ï¼Œçœ‹ä¸åˆ°ä¸­æ–‡å­—å¹•ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤å­—å¹•çª—å£æ²¡æœ‰è¢«æœ€å°åŒ–
- æ£€æŸ¥ç³»ç»ŸéŸ³é¢‘è¾“å‡ºæ˜¯å¦æ­£å¸¸
- æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

#### 3. å»¶è¿Ÿå¤ªé«˜ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ç½‘ç»œè¿æ¥è´¨é‡
- é™ä½ VAD é˜ˆå€¼ï¼ˆåœ¨ .env ä¸­è®¾ç½®ï¼‰
- ç¡®è®¤æ²¡æœ‰å…¶ä»–ç¨‹åºå ç”¨å¤§é‡å¸¦å®½

#### 4. å¦‚ä½•åˆ‡æ¢ç•Œé¢è¯­è¨€ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
- ç¼–è¾‘é…ç½®æ–‡ä»¶ `~/Documents/meeting_translator/config/config.json`
- ä¿®æ”¹ `"lang"` å­—æ®µä¸º `"zh_CN"`ï¼ˆä¸­æ–‡ï¼‰æˆ– `"en_US"`ï¼ˆè‹±æ–‡ï¼‰
- é‡å¯åº”ç”¨ç¨‹åº

æ›´å¤šé—®é¢˜è¯·æŸ¥çœ‹ï¼š[å®Œæ•´ FAQ](docs/FAQ.md)

### å·²çŸ¥é—®é¢˜

#### OpenAI æä¾›å•†çš„ LLM æç¤ºè¯è§£æé—®é¢˜

**ç°è±¡**: ä½¿ç”¨ OpenAI ä½œä¸ºç¿»è¯‘æä¾›å•†æ—¶ï¼ˆç‰¹åˆ«æ˜¯åœ¨è¯´æ¨¡å¼ä¸‹ï¼‰ï¼ŒæŸäº›å¥å­å¯èƒ½ä¼šè¢« LLM è¯¯è§£ä¸ºæŒ‡ä»¤è€Œä¸æ˜¯å¾…ç¿»è¯‘çš„å†…å®¹ã€‚

**ç¤ºä¾‹**:
```
è¾“å…¥: ä¸è¦ç¿»è¯‘è¿™å¥è¯
é¢„æœŸç¿»è¯‘: Don't translate this sentence
å®é™…è¾“å‡º: Understood. I won't translate that sentence. Please go ahead with what you'd like me to translate next.
```

**åŸå› **: OpenAI Realtime API ä½¿ç”¨ GPT æ¨¡å‹ + æç¤ºè¯çš„æ–¹å¼è¿›è¡Œç¿»è¯‘ï¼Œè€Œéä¸“ç”¨çš„ç¿»è¯‘æ¨¡å‹ã€‚æŸäº›åŒ…å«æŒ‡ä»¤æ€§è¯­ä¹‰çš„å¥å­å¯èƒ½è§¦å‘æ¨¡å‹çš„å¯¹è¯æ¨¡å¼ã€‚

**å½±å“**:
- ä¸»è¦å½±å“è¯´æ¨¡å¼ï¼ˆSpeak Modeï¼‰
- å¶å‘æ€§é—®é¢˜ï¼Œä¸æ˜¯æ‰€æœ‰å¥å­éƒ½ä¼šè§¦å‘
- æ­£å¸¸å¯¹è¯å†…å®¹é€šå¸¸ä¸å—å½±å“

**å»ºè®®**:
- å¦‚æœéœ€è¦æ›´ç¨³å®šçš„ç¿»è¯‘è´¨é‡ï¼Œå»ºè®®ä½¿ç”¨é˜¿é‡Œäº‘æä¾›å•†ï¼ˆ`TRANSLATION_PROVIDER=aliyun`ï¼‰
- é˜¿é‡Œäº‘ä½¿ç”¨ä¸“ç”¨çš„ç¿»è¯‘æ¨¡å‹ï¼Œä¸å­˜åœ¨æ­¤é—®é¢˜

### é¡¹ç›®ç»“æ„

```
meeting_translator/
â”œâ”€â”€ meeting_translator/              # æ ¸å¿ƒç¨‹åº
â”‚   â”œâ”€â”€ main_app.py                 # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ translation_service.py      # ç¿»è¯‘æœåŠ¡å°è£…
â”‚   â”œâ”€â”€ translation_client_base.py  # ç¿»è¯‘å®¢æˆ·ç«¯åŸºç±»
â”‚   â”œâ”€â”€ translation_client_factory.py # å®¢æˆ·ç«¯å·¥å‚
â”‚   â”œâ”€â”€ qwen_client.py              # é˜¿é‡Œäº‘å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ openai_client.py            # OpenAI å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ doubao_client.py            # è±†åŒ…å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ audio_capture_thread.py     # éŸ³é¢‘æ•è·
â”‚   â”œâ”€â”€ audio_output_thread.py      # éŸ³é¢‘è¾“å‡º
â”‚   â”œâ”€â”€ subtitle_window.py          # å­—å¹•çª—å£
â”‚   â”œâ”€â”€ i18n.py                     # å›½é™…åŒ–ç®¡ç†
â”‚   â”œâ”€â”€ locales/                    # ç¿»è¯‘æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ zh_CN.json             # ä¸­æ–‡ç¿»è¯‘
â”‚   â”‚   â””â”€â”€ en_US.json             # è‹±æ–‡ç¿»è¯‘
â”‚   â”œâ”€â”€ glossary.json               # æœ¯è¯­åº“
â”‚   â””â”€â”€ styles/                     # UIæ ·å¼
â”œâ”€â”€ docs/                           # æ–‡æ¡£
â”œâ”€â”€ .env.example                    # é…ç½®æ¨¡æ¿
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

### è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„ä¿®æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ä¸€ä¸ª Pull Request

### è‡´è°¢

- æ„Ÿè°¢é˜¿é‡Œäº‘é€šä¹‰åƒé—®å›¢é˜Ÿæä¾›çš„å®æ—¶ç¿»è¯‘ API
- æ„Ÿè°¢ OpenAI æä¾›çš„ Realtime API
- æ„Ÿè°¢ VB-Audio æä¾›çš„ Voicemeeter è™šæ‹ŸéŸ³é¢‘è®¾å¤‡

### è”ç³»æ–¹å¼

- **ä½œè€…**: Ren Yuan
- **GitHub**: [@eerenyuan](https://github.com/eerenyuan)
- **é¡¹ç›®åœ°å€**: [https://github.com/eerenyuan/meeting_translator](https://github.com/eerenyuan/meeting_translator)

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªâ­ï¸ Staræ”¯æŒä¸€ä¸‹ï¼**

**[è¿”å›é¡¶éƒ¨](#meeting-translator---å®æ—¶ä¼šè®®ç¿»è¯‘ç³»ç»Ÿ) | [English](#english)**

---

<a name="english"></a>

## English

**From "Dumplings in a Teapot" to Fluent Conversations: Building a Zero-Latency Real-Time Meeting Translation System**

A truly zero-latency, bidirectional, fully local, meeting-software-agnostic translation system.

### Key Highlights

- ğŸ¯ **Fully Local Operation**: Runs only on your computer, completely invisible to other meeting participants, no cooperation required
- ğŸŒ **Meeting Software Agnostic**: Supports all meeting platforms including Zoom, Teams, Google Meet, Tencent Meeting, etc.
- âš¡ **True Zero Latency**: <500ms end-to-end latency, doesn't interrupt conversation flow
- ğŸ”„ **Multiple Provider Support**: Supports Alibaba Cloud, OpenAI, and other translation services, easily switchable
- ğŸ­ **Virtual Avatar Mode**: Express confidently in Chinese through virtual characters like "Mike"
- ğŸŒ **Multilingual Interface**: Supports Chinese and English interfaces, switchable in configuration

### Features

#### Dual-Mode Real-Time Translation

**Speak Mode (S2S):**
- Captures your microphone input (Chinese)
- Translates in real-time to English
- Outputs to virtual microphone â†’ Everyone in the meeting hears English
- **Latency <500ms**

**Listen Mode (S2T):**
- Captures system audio (English spoken by others in the meeting)
- Translates in real-time to Chinese
- **Displays Chinese subtitles on screen** (considering Chinese users' habit of reading subtitles)
- **Latency <300ms** (faster without TTS stage)

**Multi-Participant Meeting Support:**
- Works normally regardless of the number of participants in the meeting
- All participants are completely unaware you're using translation

### Demo Video

ğŸ“º Watch full demo and technical details: [Meeting Translator Project Share](https://www.superlinear.academy/c/share-your-projects/f2e629)

### Quick Start

#### Prerequisites

1. **Operating System**: Windows 10/11, macOS
2. **Python**: 3.9 - 3.11
3. **Virtual Audio Device**:
   - Windows: [Voicemeeter](https://voicemeeter.com/)
   - macOS: BlackHole
4. **Translation Service API Key** (choose one):
   - **Alibaba Cloud DashScope** (default): [Apply here](https://dashscope.console.aliyun.com/)
   - **OpenAI Realtime API**: [Apply here](https://platform.openai.com/api-keys)

#### Installation Steps

##### 1. Clone the Repository

```bash
git clone https://github.com/eerenyuan/meeting_translator.git
cd meeting_translator
```

##### 2. Create Virtual Environment

```bash
python -m venv .venv

# Windows
.venv\Scripts\activate

# macOS
source .venv/bin/activate
```

##### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

> **Note**: PyAudio on Windows may require manual installation:
> ```bash
> pip install pipwin
> pipwin install pyaudio
> ```

##### 4. Install Virtual Audio Driver

**Windows Users:**

Download and install [Voicemeeter](https://voicemeeter.com/) (Voicemeeter Banana or Potato version recommended), restart your computer after installation.

**macOS Users:**

```bash
brew install portaudio blackhole-2ch
```

##### 5. Configure Environment Variables

```bash
# Copy configuration template
cp .env.example .env

# Edit .env file to configure translation service provider and API Key
```

**Using Alibaba Cloud (default):**
```bash
TRANSLATION_PROVIDER=aliyun
DASHSCOPE_API_KEY=your_dashscope_api_key_here
```

**Using OpenAI:**
```bash
TRANSLATION_PROVIDER=openai
OPENAI_API_KEY=your_openai_api_key_here
```

##### 6. Configure Interface Language (Optional)

Edit the configuration file `~/Documents/meeting_translator/config/config.json`:

```json
{
  "lang": "zh_CN"  // Chinese interface (default)
  // or
  "lang": "en_US"  // English interface
}
```

Supported language codes:
- `zh_CN` or `zh` or `cn` - Chinese
- `en_US` or `en` - English

> **Note**: The configuration file will be created automatically after first run, defaulting to Chinese interface.

##### 7. Run the Program

**Windows**:
```bash
# Method 1: Using batch file (recommended)
run.bat

# Method 2: Manual run
cd meeting_translator && python main_app.py
```

**macOS**:
```bash
cd meeting_translator && python main_app.py
```

### Using UV (Recommended for Git Worktrees)

**UV** is a modern Python package manager that provides automatic environment management and dependency installation, especially suitable for multi-branch development scenarios using git worktree.

#### Why Use UV?

- âœ… **No Manual Virtual Environment Activation** - Automatically manages Python environments
- âœ… **Git Worktree Friendly** - Multiple worktrees share dependency cache, no duplicate installation
- âœ… **One-Click Run** - Just `uv run main.py`
- âœ… **Cross-Platform Support** - Unified experience on Windows, macOS, Linux
- âœ… **Faster Dependency Installation** - Parallel installation, cache-friendly

#### Installing UV

**macOS/Linux:**
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

**Windows (PowerShell):**
```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

**Or using pip:**
```bash
pip install uv
```

#### Running with UV

##### Method 1: Using uv run (recommended)

```bash
# Run directly from repository root
uv run main.py
```

On first run, UV will:
1. Automatically detect Python version (based on `.python-version`)
2. Create virtual environment
3. Install all dependencies
4. Start the application

Subsequent runs will reuse the installed environment, instant startup!

##### Method 2: Using Startup Scripts

**macOS/Linux:**
```bash
./run.sh
```

**Windows:**
```bash
run.bat
```

The startup script automatically checks:
- âœ“ Whether `.env` configuration file exists
- âœ“ Whether `uv` is installed
- âœ“ Provides friendly error messages

### User Guide

#### Basic Usage

1. **Start the Program**

   **Windows**:
   ```bash
   # Method 1: Using batch file (recommended)
   run.bat

   # Method 2: Manual run
   cd meeting_translator && python main_app.py
   ```

   **macOS**:
   ```bash
   cd meeting_translator && python main_app.py
   ```

2. **Select Mode**
   - Press `F1` to switch to "Speak Mode" (Chinese to English)
   - Press `F2` to switch to "Listen Mode" (English to Chinese)

3. **Set Up Meeting Software**
   - In your meeting software, select **"Voicemeeter Input"** as the microphone
   - Set system audio output to "Voicemeeter Input"

4. **Start Meeting**
   - Speak Mode: Speak in Chinese directly, others hear English
   - Listen Mode: Read subtitles on screen to understand English in real-time

#### Advanced Features

##### Switching Translation Service Providers

The system supports multiple translation service providers, easily switchable through configuration:

| Provider | Features | Configuration |
|----------|----------|---------------|
| **Alibaba Cloud DashScope** | Default, optimized for Chinese-English translation | `TRANSLATION_PROVIDER=aliyun` |
| **OpenAI Realtime API** | GPT-realtime powered, supports multiple languages | `TRANSLATION_PROVIDER=openai` |

**Switching Steps:**
1. Edit `.env` file
2. Modify `TRANSLATION_PROVIDER` setting
3. Configure corresponding API Key
4. Restart the program

> Note: Different providers support different voice options. After switching, select an appropriate voice in the interface.

##### Custom Glossary

Edit `meeting_translator/glossary.json` to add technical terms:

```json
{
  "description": "Translation glossary for meeting translator",
  "glossary": {
    "äº§å“A": "Product A",
    "ä¸šåŠ¡ç³»ç»Ÿ": "Business System",
    "ä½ çš„å…¬å¸å": "Your Company Name",
    "å¼ æ€»": "Mr. Zhang"
  }
}
```

For detailed instructions, see: [Glossary Guide](docs/GLOSSARY_GUIDE.md)

### Technical Architecture

#### Core Technologies

- **Virtual Audio Hijacking**: Works at the OS audio layer, decoupled from meeting software
- **Streaming Translation API**: End-to-end real-time processing with ultra-low latency
- **Server-Side VAD**: Automatic voice activity detection for optimized segmentation
- **Multimodal Output**: Speak mode outputs audio, Listen mode outputs subtitles

#### System Requirements

| Component | Requirement |
|-----------|-------------|
| CPU | Dual-core or higher |
| Memory | 4GB+ |
| Network | Stable internet connection |
| Audio Devices | Microphone, speakers |

### FAQ

#### 1. Can't hear the translated English audio?

**Problem**: In Speak Mode, others can't hear my translation.

**Solution**:
- Confirm meeting software microphone is set to "Voicemeeter Input"
- Check if Voicemeeter is running
- Restart the program and meeting software

#### 2. Subtitles not showing?

**Problem**: In Listen Mode, can't see Chinese subtitles.

**Solution**:
- Confirm subtitle window is not minimized
- Check if system audio output is working normally
- Check console for error messages

#### 3. Latency too high?

**Solution**:
- Check network connection quality
- Lower VAD threshold (set in .env)
- Ensure no other programs are consuming significant bandwidth

#### 4. How to switch interface language?

**Solution**:
- Edit configuration file `~/Documents/meeting_translator/config/config.json`
- Modify `"lang"` field to `"zh_CN"` (Chinese) or `"en_US"` (English)
- Restart the application

For more issues, see: [Complete FAQ](docs/FAQ.md)

### Known Issues

#### OpenAI Provider LLM Prompt Parsing Issue

**Symptom**: When using OpenAI as the translation provider (especially in Speak Mode), some sentences may be misinterpreted by the LLM as instructions rather than content to be translated.

**Example**:
```
Input: ä¸è¦ç¿»è¯‘è¿™å¥è¯
Expected translation: Don't translate this sentence
Actual output: Understood. I won't translate that sentence. Please go ahead with what you'd like me to translate next.
```

**Cause**: OpenAI Realtime API uses GPT model + prompts for translation, rather than a dedicated translation model. Sentences with instructional semantics may trigger the model's conversational mode.

**Impact**:
- Mainly affects Speak Mode
- Occasional issue, doesn't affect all sentences
- Normal conversation content is usually not affected

**Recommendation**:
- For more stable translation quality, recommend using Alibaba Cloud provider (`TRANSLATION_PROVIDER=aliyun`)
- Alibaba Cloud uses dedicated translation models and doesn't have this issue

### Project Structure

```
meeting_translator/
â”œâ”€â”€ meeting_translator/              # Core program
â”‚   â”œâ”€â”€ main_app.py                 # Main entry point
â”‚   â”œâ”€â”€ translation_service.py      # Translation service wrapper
â”‚   â”œâ”€â”€ translation_client_base.py  # Translation client base class
â”‚   â”œâ”€â”€ translation_client_factory.py # Client factory
â”‚   â”œâ”€â”€ qwen_client.py              # Alibaba Cloud client
â”‚   â”œâ”€â”€ openai_client.py            # OpenAI client
â”‚   â”œâ”€â”€ doubao_client.py            # Doubao client
â”‚   â”œâ”€â”€ audio_capture_thread.py     # Audio capture
â”‚   â”œâ”€â”€ audio_output_thread.py      # Audio output
â”‚   â”œâ”€â”€ subtitle_window.py          # Subtitle window
â”‚   â”œâ”€â”€ i18n.py                     # Internationalization manager
â”‚   â”œâ”€â”€ locales/                    # Translation files
â”‚   â”‚   â”œâ”€â”€ zh_CN.json             # Chinese translations
â”‚   â”‚   â””â”€â”€ en_US.json             # English translations
â”‚   â”œâ”€â”€ glossary.json               # Glossary
â”‚   â””â”€â”€ styles/                     # UI styles
â”œâ”€â”€ docs/                           # Documentation
â”œâ”€â”€ .env.example                    # Configuration template
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

### Contributing

Contributions, issue reports, and suggestions are welcome!

1. Fork this repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

### Acknowledgments

- Thanks to Alibaba Cloud Tongyi Qianwen team for providing the real-time translation API
- Thanks to OpenAI for providing the Realtime API
- Thanks to VB-Audio for providing Voicemeeter virtual audio device

### Contact

- **Author**: Ren Yuan
- **GitHub**: [@eerenyuan](https://github.com/eerenyuan)
- **Project URL**: [https://github.com/eerenyuan/meeting_translator](https://github.com/eerenyuan/meeting_translator)

**If this project helps you, please give it a â­ï¸ Star!**

**[Back to Top](#meeting-translator---å®æ—¶ä¼šè®®ç¿»è¯‘ç³»ç»Ÿ) | [ä¸­æ–‡](#ä¸­æ–‡)**
